# ๐จโ๐ป ุฏููู ุงููุทูุฑ ููุฑุดุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI)

ูุฐุง ุงููุณุชูุฏ ูุญุชูู ุนูู ุงูููุงููู ุงูุตุงุฑูุฉ ูุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ ูุถูุงู ุงุณุชูุฑุงุฑ **KawnHub v2.0**.
**ูุฌุจ ุนูู ุฃู ูุทูุฑ (ุฃู AI) ูุฑุงุกุฉ ูุฐุง ุงูููู ูุจู ูุชุงุจุฉ ุฃู ููุฏ.**

---

## โ๏ธ 1. ุงูููุงุนุฏ ุงูุฐูุจูุฉ (Golden Rules)

### ุฃ. ุงูุชุนุงูู ูุน Next.js 15
1. **`await params`:** ูู ุตูุญุงุช ุงูุฎุงุฏู (`page.js`)ุ ุงููุชุบูุฑุงุช `params` ู `searchParams` ูู **Promises**. ูุฌุจ ุงุณุชุฎุฏุงู `await` ูุจู ูุฑุงุกุชูุง ูุชุฌูุจ ุงูุฃุฎุทุงุก.
   ```javascript
   // โ ุตุญูุญ
   const { slug } = await params;
   // โ ุฎุทุฃ
   const { slug } = params;
   ```

2. **ุชุญุฏูุซ ุงููุงุด (Revalidation):** ุนูุฏ ุฅุฌุฑุงุก ุฃู ุชุนุฏูู ูู ุงูุฏุงุชุงุจูุณ ูู ููุญุฉ ุงูุชุญููุ ูุฌุจ ุงุณุชุฎุฏุงู `revalidatePath` ุฃู `router.refresh()` ูุฅูุง ูู ูุธูุฑ ุงูุชุบููุฑ ูู Vercel.

### ุจ. ุงูุชุนุงูู ูุน Firebase
1. **ุงูุญููุงุช ุงููุงููุงุฆูุฉ (Infinite Loops):**
   *   โ **ุฎุทุฑ:** ูุง ุชุถุน ุฏุงูุฉ ุชููู ุจู "ุงููุชุงุจุฉ" ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุซู `updateDoc`) ุฏุงุฎู `useEffect` ูุนุชูุฏ ุนูู `user` ุจุฏูู ุญูุงูุฉ. ูุฐุง ูุณุจุจ ุงุณุชูุฒุงู ุงูุญุตุฉ (Quota Exceeded) ูู ุซูุงูู.
   *   โ **ุงูุญู:** ุงุณุชุฎุฏู `useRef` ูุชุชุจุน ุงูุชุบููุฑุงุชุ ุฃู ุงูุตู ููุทู ุงููุฑุงุกุฉ ุนู ุงููุชุงุจุฉ.

2. **ุงูุชูุงุฑูุฎ:** ูุง ุชูุฑุฑ ูุงุฆูุงุช Timestamp ูุจุงุดุฑุฉ ูู Server Component ุฅูู Client Component. ุญูููุง ุฏุงุฆูุงู ุฅูู ูุต: `.toDate().toISOString()`.

---

## ๐ 2. ุฃุฎุทุงุก ุดุงุฆุนุฉ ูุญููููุง (Troubleshooting)

| ุงูุฎุทุฃ | ุงูุณุจุจ ุงููุญุชูู | ุงูุญู |
| :--- | :--- | :--- |
| **Quota Exceeded** | ุญููุฉ ูุง ููุงุฆูุฉ ูู `useEffect` | ุฑุงุฌุน ุฏูุงู ุงูุชุญุฏูุซ ูู `MaterialClient` ุฃู `AuthContext`. |
| **Permission Denied** | ูุญุงููุฉ ูุฑุงุกุฉ/ูุชุงุจุฉ ูู ุงูุฎุงุฏู ุจุฏูู ูููุฉ | ุงููู ุงูุนูููุฉ ุฅูู Client Component ุฃู ุงุณุชุฎุฏู Admin SDK (ูุคุฌู ุญุงููุงู). |
| **404 ุนูุฏ ูุชุญ ุงููุงุฏุฉ** | ุงูุฑุงุจุท ูุง ูุญุชูู ุนูู slug ุตุญูุญ | ุชุฃูุฏ ูู ุชูุฑูุฑ `materialSlug` ูููุณ ุงูู ID ููุท. |
| **Hydration Error** | ุงุฎุชูุงู HTML ุจูู ุงูุณูุฑูุฑ ูุงูุนููู | ุชุฃูุฏ ูู ุนุฏู ุงุณุชุฎุฏุงู `window` ุฃู ุนุดูุงุฆูุงุช ูุจู ุงูู mount. |

---

## ๐ค 3. ุงูุจุฑููุจุช ููุฐูุงุก ุงูุงุตุทูุงุนู (AI Prompt)

ุนูุฏ ุจุฏุก ูุญุงุฏุซุฉ ุฌุฏูุฏุฉุ ุงูุณุฎ ูุฐุง ุงูููุทุน ููุนุฑู ุงูู AI ุณูุงู ุงููุดุฑูุน ุจุฏูุฉ:

```plaintext
ุฃูุช ุชุนูู ุนูู ูุดุฑูุน KawnHub (Next.js 15 + Firebase v12).
ุงูููุงุนุฏ ุงูุตุงุฑูุฉ:
1. ุงุณุชุฎุฏู "Client Components" ููุชูุงุนูุงุช ู "Server Components" ูุฌูุจ ุงูุจูุงูุงุช ุงูุซุงุจุชุฉ.
2. ูู Next.js 15: ูุฌุจ ุนูู await ูู params ู searchParams ุฏุงุฆูุงู.
3. ุนูุฏ ุชุนุฏูู ุงูุจูุงูุงุช (Admin)ุ ุงุณุชุฎุฏู router.refresh() ูุชุญุฏูุซ ูุงุฌูุฉ Vercel.
4. ุชุฌูุจ ุงุณุชูุฑุงุฏ Firebase Auth/Firestore ูู ููููุงุช ุงูุฎุงุฏู ุฅูุง ููุถุฑูุฑุฉ ุงููุตูู.
5. ุงูุชุฒู ุจูุณุงุฑุงุช ุงููุฌูุฏุงุช: src/app, src/components, src/lib.
6. ูุง ุชุณุชุฎุฏู ููุชุจุงุช ุฎุงุฑุฌูุฉ ุซูููุฉ (ูุซู Text Editors)ุ ูุนุชูุฏ ุนูู ุญููููุง ุงูุฎุงุตุฉ.
```

---

## ๐๏ธ 4. ูููููุฉ ุงูุจูุงูุงุช (Data Schema)

ุฑุงุฌุน ููู `db_schema.md` ููุนุฑูุฉ ุงูุญููู ุงููุทููุจุฉ ูู ูู Collection.